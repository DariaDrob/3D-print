<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º—ñ–Ω–∫–∞ 3D Family Print</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-gray-900 to-black text-white min-h-screen flex items-center justify-center">
<div class="max-w-lg w-full">

    <div id="passwordScreen" class="bg-gray-800 p-16 rounded-3xl shadow-2xl text-center border-4 border-orange-500">
        <h1 class="text-6xl font-bold text-orange-500 mb-10">–ê–î–ú–Ü–ù–ö–ê</h1>
        <h2 class="text-3xl mb-8">–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥—É</h2>
        <input type="password" id="adminPassword" class="w-full px-6 py-5 bg-gray-700 rounded-xl text-white text-2xl mb-8" placeholder="–ü–∞—Ä–æ–ª—å">
        <button id="enterBtn" class="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold text-3xl py-6 rounded-xl transition transform hover:scale-105">
            –£–í–Ü–ô–¢–ò
        </button>
        <p id="passwordError" class="text-red-500 mt-6 text-2xl hidden">–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ò–ô –ü–ê–†–û–õ–¨!</p>
    </div>


    <div id="mainForm" class="hidden">
        <h1 class="text-5xl font-bold text-orange-500 mb-10 text-center">–î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É</h1>
        <form id="uploadForm" class="bg-gray-800 p-10 rounded-3xl shadow-2xl">
            <div class="mb-8">
                <label class="block text-2xl mb-4">–ù–∞–∑–≤–∞</label>
                <input type="text" id="name" required class="w-full px-6 py-4 bg-gray-700 rounded-xl text-white text-xl">
            </div>
            <div class="mb-8">
                <label class="block text-2xl mb-4">–û–ø–∏—Å</label>
                <textarea id="desc" required rows="4" class="w-full px-6 py-4 bg-gray-700 rounded-xl text-white text-xl"></textarea>
            </div>
            <div class="mb-10">
                <label class="block text-2xl mb-4">–§–æ—Ç–æ</label>
                <div id="dropZone" class="border-4 border-dashed border-orange-500 rounded-xl p-16 text-center hover:bg-gray-700 transition cursor-pointer">
                    <input type="file" id="file" accept="image/*" required class="hidden">
                    <p class="text-3xl">–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ —Ñ–æ—Ç–æ</p>
                    <p class="text-xl text-gray-400 mt-4">–∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏</p>
                </div>
                <div id="preview" class="mt-6"></div>
            </div>
            <button type="submit" class="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold text-3xl py-6 rounded-xl transition">
                –î–û–î–ê–¢–ò –ü–†–û–ï–ö–¢
            </button>
        </form>
        <div id="result" class="mt-10 text-center text-3xl"></div>
    </div>
</div>

<script>
    const passwordScreen = document.getElementById('passwordScreen');
    const mainForm = document.getElementById('mainForm');
    const enterBtn = document.getElementById('enterBtn');
    const passwordInput = document.getElementById('adminPassword');
    const passwordError = document.getElementById('passwordError');

    enterBtn.addEventListener('click', () => {
        const password = passwordInput.value;
        if (password === '3dFamily2025!') {
            passwordScreen.classList.add('hidden');
            mainForm.classList.remove('hidden');
        } else {
            passwordError.classList.remove('hidden');
            setTimeout(() => passwordError.classList.add('hidden'), 3000);
        }
    });


    const fileInput = document.getElementById('file');
    const preview = document.getElementById('preview');
    const dropZone = document.getElementById('dropZone');

    dropZone.addEventListener('click', () => fileInput.click());
    dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('bg-gray-700'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('bg-gray-700'));
    dropZone.addEventListener('drop', e => {
        e.preventDefault();
        dropZone.classList.remove('bg-gray-700');
        if (e.dataTransfer.files.length) {
            fileInput.files = e.dataTransfer.files;
            showPreview(e.dataTransfer.files[0]);
        }
    });

    fileInput.addEventListener('change', () => {
        if (fileInput.files.length) showPreview(fileInput.files[0]);
    });

    function showPreview(file) {
        const reader = new FileReader();
        reader.onload = e => {
            preview.innerHTML = `<img src="${e.target.result}" class="max-w-full rounded-lg shadow-lg">`;
        };
        reader.readAsDataURL(file);
    }

    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData();
        formData.append('name', document.getElementById('name').value);
        formData.append('desc', document.getElementById('desc').value);
        formData.append('file', fileInput.files[0]);

        const res = await fetch('/projects/admin/upload', {
            method: 'POST',
            body: formData
        });

        const data = await res.json();
        document.getElementById('result').innerHTML =
            res.ok ? '<p class="text-green-400 text-4xl">–ü—Ä–æ–µ–∫—Ç –¥–æ–¥–∞–Ω–æ! –û–Ω–æ–≤–∏ —Å–∞–π—Ç üöÄ</p>'
                : `<p class="text-red-400 text-4xl">–ü–æ–º–∏–ª–∫–∞: ${data.message}</p>`;
    });
</script>
</body>
</html>